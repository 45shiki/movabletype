/* Copyright (c) 2013 Six Apart, Ltd.
 * This file is generated by Movable Type DataAPI SDK for JavaScript.
 * Consult the source files for their respective licenses and copyrights.
 * https://github.com/movabletype/mt-data-api-sdk-js
 */
!function(window,undefined){"use strict";var DataAPI=function(a){var b,c,d,e=["clientId","baseUrl"];this.o={clientId:undefined,baseUrl:undefined,format:undefined,sessionStore:undefined,sessionDomain:undefined,sessionPath:undefined,async:!0,cache:!1,disableFormData:!1};for(c in a){if(!(c in this.o))throw"Unkown option: "+c;if("object"==typeof this.o[c]&&null!==this.o[c])for(d in this.o[c])this.o[c][d]=a[c][d];else this.o[c]=a[c]}for(b=0;b<e.length;b++)if(!this.o[e[b]])throw'The "'+e[b]+'" is required.';this.callbacks={},this.tokenData=null,this.iframeId=0,this.trigger("initialize")};DataAPI.version=1,DataAPI.accessTokenKey="mt_data_api_access_token",DataAPI.iframePrefix="mt_data_api_iframe_",DataAPI.defaultFormat="json",DataAPI.defaultSessionStore=window.document&&window.document.cookie?"cookie":"fs",DataAPI.callbacks={},DataAPI.formats={json:{fileExtension:"json",mimeType:"application/json",serialize:function(){return JSON.stringify.apply(JSON,arguments)},unserialize:function(){return JSON.parse.apply(JSON,arguments)}}},DataAPI.sessionStores={cookie:{save:function(a,b){var c=this.o;Cookie.bake(a,b,c.sessionDomain,c.sessionPath)},fetch:function(a){return Cookie.fetch(a).value},remove:function(a){var b=this.o;Cookie.bake(a,"",b.sessionDomain,b.sessionPath,new Date(0))}}},DataAPI.on=function(a,b){this.callbacks[a]||(this.callbacks[a]=[]),this.callbacks[a].push(b)},DataAPI.off=function(a,b){var c,d;if(b){for(d=this.callbacks[a]||[],c=0;c<d.length;c++)if(d[c]===b){d.splice(c,1);break}}else delete this.callbacks[a]},DataAPI.registerFormat=function(a,b){DataAPI.formats[a]=b},DataAPI.registerSessionStore=function(a,b){DataAPI.sessionStores[a]=b},DataAPI.getDefaultFormat=function(){return DataAPI.formats[DataAPI.defaultFormat]},DataAPI.getDefaultSessionStore=function(){return DataAPI.sessionStores[DataAPI.defaultSessionStore]},DataAPI.prototype={getAuthorizationUrl:function(a){return this.o.baseUrl.replace(/\/*$/,"/")+"v"+this.getVersion()+"/authorization"+"?clientId="+this.o.clientId+"&redirectUrl="+a},_getCurrentEpoch:function(){return Math.round((new Date).getTime()/1e3)},_getNextIframeName:function(){return DataAPI.iframePrefix+ ++this.iframeId},getVersion:function(){return DataAPI.version},getAppKey:function(){return DataAPI.accessTokenKey+"_"+this.o.clientId},findFormat:function(a){if(!a)return null;for(var b in DataAPI.formats)if(DataAPI.formats[b].mimeType===a)return DataAPI.formats[b];return null},getCurrentFormat:function(){return DataAPI.formats[this.o.format]||DataAPI.getDefaultFormat()},serializeData:function(){return this.getCurrentFormat().serialize.apply(this,arguments)},unserializeData:function(){return this.getCurrentFormat().unserialize.apply(this,arguments)},getCurrentSessionStore:function(){return DataAPI.sessionStores[this.o.sessionStore]||DataAPI.getDefaultSessionStore()},saveSessionData:function(){return this.getCurrentSessionStore().save.apply(this,arguments)},fetchSessionData:function(){return this.getCurrentSessionStore().fetch.apply(this,arguments)},removeSessionData:function(){return this.getCurrentSessionStore().remove.apply(this,arguments)},storeTokenData:function(a){a.startTime=this._getCurrentEpoch(),this.saveSessionData(this.getAppKey(),this.serializeData(a)),this.tokenData=a},_updateTokenFromDefaultCookie:function(){var a=DataAPI.accessTokenKey,b=Cookie.fetch(a),c;if(!b)return null;try{c=this.unserializeData(b.value)}catch(d){return null}return this.storeTokenData(c),Cookie.bake(a,"",undefined,"/",new Date(0)),c},getTokenData:function(){var a=this.tokenData;if(!a){if(window.location&&"#_login"===window.location.hash)try{a=this._updateTokenFromDefaultCookie()}catch(b){}if(!a)try{a=this.unserializeData(this.fetchSessionData(this.getAppKey()))}catch(b){}}return a&&a.startTime+a.expiresIn<this._getCurrentEpoch()&&(this.removeSessionData(this.getAppKey()),a=null),this.tokenData=a,this.tokenData?this.tokenData:null},getAuthorizationHeader:function(){var a=this.getTokenData();return a&&a.accessToken?"MTAuth accessToken="+a.accessToken:""},bindEndpointParams:function(a,b){var c,d;for(c in b)d=b[c],"object"==typeof d&&(d="function"==typeof d?d.id():d.id),"function"==typeof d&&(d=d()),a=a.replace(new RegExp(":"+c),d);return a},_isElement:function(a,b){if(!a||"object"!=typeof a)return!1;var c=a.nodeName;return c&&c.toLowerCase()===b},_isFormElement:function(a){return this._isElement(a,"form")},_isInputElement:function(a){return this._isElement(a,"input")},_isFileInputElement:function(a){return this._isInputElement(a)&&"file"===a.type.toLowerCase()},_serializeObject:function(a){function b(a){return 10>a?"0"+a:a}function c(a){if(!isFinite(a.valueOf()))return"";var c,d=a.getTimezoneOffset();return 0===d?c="Z":(c=d>0?"-":"+",d=Math.abs(d),c+=b(Math.floor(d/60))+":"+b(d%60)),a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+c}this._isFormElement(a)&&(a=this._serializeFormElementToObject(a));var d=typeof a;return"undefined"===d||null===a||"number"===d&&!isFinite(a)?"":a instanceof Date?c(a):window.File&&a instanceof window.File?a:this._isFileInputElement(a)?a.files[0]:"object"===d?this.serializeData(a,function(a,b){return this[a]instanceof Date?c(this[a]):b}):a},_serializeParams:function(a){if(!a)return a;if("string"==typeof a)return a;this._isFormElement(a)&&(a=this._serializeFormElementToObject(a));var b,c="";for(b in a)a.hasOwnProperty(b)&&(c&&(c+="&"),c+=encodeURIComponent(b)+"="+encodeURIComponent(this._serializeObject(a[b])));return c},_unserializeParams:function(a){if("string"!=typeof a)return a;var b,c,d={},e=a.split("&");for(b=0;b<e.length;b++)c=e[b].split("="),d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return d},_newXMLHttpRequestStandard:function(){try{return new window.XMLHttpRequest}catch(a){}},_newXMLHttpRequestActiveX:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},newXMLHttpRequest:function(){return this._newXMLHttpRequestStandard()||this._newXMLHttpRequestActiveX()||!1},_findFileInput:function(a){if("object"!=typeof a)return null;for(var b in a)if(this._isFileInputElement(a[b]))return a[b];return null},_isEmptyObject:function(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},sendXMLHttpRequest:function(a,b,c,d){var e,f,g,h=this.getAuthorizationHeader();a.open(b,c,this.o.async),"string"==typeof d&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),h&&a.setRequestHeader("X-MT-Authorization",h);function i(a,b,c){return b+c.toUpperCase()}if(d&&d.getHeaders){f=d.getHeaders();for(e in f)g=e.replace(/(^|-)([a-z])/g,i),a.setRequestHeader(g,f[e])}return a.send(d),a},_serializeFormElementToObject:function(a){var b,c,d,e={},f=/^(?:submit|button|image|reset)$/i,g=/^(?:input|select|textarea|keygen)/i,h=/^(?:checkbox|radio)$/i;for(b=0;b<a.elements.length;b++)c=a.elements[b],d=c.type,!c.name||c.disabled||!g.test(c.nodeName)||f.test(d)||h.test(d)&&!c.checked||(e[c.name]=this._isFileInputElement(c)?c:this._elementValue(c));return e},_elementValue:function(a){if("select"===a.nodeName.toLowerCase()){var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;for(;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||c.parentNode.disabled&&"optgroup"===c.parentNode.nodeName.toLowerCase())){if(b=c.attributes.value,b=!b||b.specified?c.value:a.text,f)return b;g.push(b)}return g}return a.value},withOptions:function(a,b){var c,d,e=this.o,f={};for(c in e)f[c]=e[c];for(c in a)f[c]=a[c];return this.o=f,d=b.apply(this),this.o=e,d},request:function(a,b){var c,d,e,f,g=this,h=[],i=null,j=function(){},k=null,l=!0,m=this.getCurrentFormat(),n=Array.prototype.slice.call(arguments),o={};function p(a){var b,c;if(!g.o.disableFormData&&window.FormData){if(a instanceof window.FormData)return a;if(g._isFormElement(a))return new window.FormData(a);if(window.FormData&&"object"==typeof a){c=new window.FormData;for(b in a)c.append(b,g._serializeObject(a[b]));return c}}if(g._isFormElement(a)){a=g._serializeFormElementToObject(a);for(b in a)a[b]instanceof Array&&(a[b]=a[b].join(","))}if(g._findFileInput(a)){l=!1,c={};for(b in a)c[b]=g._isFileInputElement(a[b])?a[b]:g._serializeObject(a[b]);a=c}else"string"!=typeof a&&(a=g._serializeParams(a));return a}function q(a){var b=j(a);return b!==!1&&a.error&&g.trigger("error",a),b}function r(a){return a.error&&401===a.error.code&&"/token"!==b}function s(){g.request("POST","/token",function(a){if(a.error&&401===a.error.code){var b=q(a);b!==!1&&g.trigger("authorizationRequired",a)}else g.storeTokenData(a),g.request.apply(g,n);return!1})}function t(a,b){return a+=-1===a.indexOf("?")?"?":"&",a+g._serializeParams(b)}for(("/token"===b||"/authentication"===b)&&(o.clientId=this.o.clientId),this.o.cache||(o._=(new Date).getTime()),m!==DataAPI.getDefaultFormat()&&(o.format=m.fileExtension),c=2;c<arguments.length;c++)switch(e=arguments[c],typeof e){case"function":j=e;break;case"object":e&&!e.nodeName&&(window.ActiveXObject&&e instanceof window.ActiveXObject||window.XMLHttpRequest&&e instanceof window.XMLHttpRequest)?k=e:h.push(e);break;case"string":h.push(this._unserializeParams(e))}if(h.length&&("get"===a.toLowerCase()||h.length>=2)&&(b=t(b,h.shift())),a.match(/^(put|delete)$/i)&&(o.__method=a,a="POST"),h.length&&(i=h.shift()),!this._isEmptyObject(o))if("get"===a.toLowerCase())b=t(b,o);else if(window.FormData&&i&&i instanceof window.FormData)for(d in o)i.append(d,o[d]);else{i=i||{};for(d in o)i[d]=o[d]}return i=p(i),f=this.o.baseUrl.replace(/\/*$/,"/")+"v"+this.getVersion(),b=b.replace(/^\/*/,"/"),l?(k=k||this.newXMLHttpRequest(),k.onreadystatechange=function(){if(4===k.readyState){var b,c,d,e;try{c=k.getResponseHeader("Content-Type"),d=g.findFormat(c)||g.getCurrentFormat(),b=d.unserialize(k.responseText)}catch(h){b={error:{code:parseInt(k.status,10),message:k.statusText}}}function j(){k.onreadystatechange=function(){}}if(r(b))return s(),j(),void 0;q(b),e=k.getResponseHeader("X-MT-Next-Phase-URL"),e?(k.abort(),g.sendXMLHttpRequest(k,a,f+e,i)):j()}},this.sendXMLHttpRequest(k,a,f+b,i)):(function(){var c,d,e,h,j=g._getNextIframeName(),k=window.document,l=k.createElement("form"),m=k.createElement("iframe"),n=g.getAuthorizationHeader();l.action=f+b,l.target=j,l.method=a,l.style.display="inline",l.encoding="multipart/form-data",l.enctype="multipart/form-data",m.name=j,m.style.position="absolute",m.style.top="-9999px",k.body.appendChild(m),m.contentWindow.name=j,i=i||{},n&&(i["X-MT-Authorization"]=n),i["X-MT-Requested-Via"]="IFRAME";for(c in i)g._isFileInputElement(i[c])?(d=i[c],e=d.name,d.name=c,d.parentNode?d.parentNode.insertBefore(l,d):k.body.appendChild(l),l.appendChild(d)):(h=k.createElement("input"),h.type="hidden",h.name=c,h.value=i[c],l.appendChild(h));l.submit();function o(){var a=m.contentWindow.document.body,b=a.textContent||a.innerText,c;function f(){setTimeout(function(){d.name=e,l.parentNode&&(l.parentNode.insertBefore(d,l),l.parentNode.removeChild(l)),m.parentNode&&m.parentNode.removeChild(m)})}try{c=g.unserializeData(b)}catch(h){c={error:{code:500,message:"Internal Server Error"}}}return r(c)?(s(),f(),void 0):(f(),q(c),void 0)}m.addEventListener?m.addEventListener("load",o,!1):m.attachEvent&&m.attachEvent("onload",o)}(),void 0)},on:DataAPI.on,off:DataAPI.off,trigger:function(a){var b,c=Array.prototype.slice.call(arguments,1),d=(DataAPI.callbacks[a]||[]).concat(this.callbacks[a]||[]);for(b=0;b<d.length;b++)d[b].apply(this,c)},_generateEndpointMethod:function(a){var b=this,c=new RegExp(":([a-zA-Z_-]+)","g"),d=null,e=a.id.replace(/_(\w)/g,function(a,b){return b.toUpperCase()});function f(){var b,d=[];while(null!==(b=c.exec(a.route)))d.push(b[1]);return d}b[e]=function(){d||(d=f());var c=Array.prototype.slice.call(arguments),e={},g={},h,i;for(i=0;i<d.length;i++)e[d[i]]=c.shift();if(h=b.bindEndpointParams(a.route,e),a.resources){for(i=0;i<a.resources.length;i++)g[a.resources[i]]=c.shift();c.push(g)}return b.request.apply(b,[a.verb,h].concat(c))}},generateEndpointMethods:function(a){for(var b=0;b<a.length;b++)this._generateEndpointMethod(a[b])},loadEndpoints:function(a){var b=this;b.withOptions({async:!1},function(){b.request("GET","/endpoints",a,function(a){a.error||b.generateEndpointMethods(a.items)})})}};var Cookie=function(a,b,c,d,e,f){this.name=a,this.value=b,this.domain=c,this.path=d,this.expires=e,this.secure=f};Cookie.prototype={fetch:function(){if(!window.document||!window.document.cookie)return undefined;var a=escape(this.name)+"=";var b=(""+window.document.cookie).split(/;\s*/);for(var c=0;c<b.length;c++)if(0==b[c].indexOf(a))return this.value=unescape(b[c].substring(a.length)),this;return undefined},bake:function(a){if(!window.document||!window.document.cookie)return undefined;function b(a){return a===undefined||null===a?!1:!0}if(!b(this.name))return undefined;b(a)?this.value=a:a=this.value;var c=escape(this.name);a=escape(a);var d=(this.domain?"; domain="+escape(this.domain):"")+(this.path?"; path="+escape(this.path):"")+(this.expires?"; expires="+this.expires.toGMTString():"")+(this.secure?"; secure=1":"");var e=c+"="+a+d;return window.document.cookie=e,this},remove:function(){this.expires=new Date(0),this.value="",this.bake()}},Cookie.fetch=function(a){var b=new this(a);return b.fetch()},Cookie.bake=function(a,b,c,d,e,f){var g=new this(a,b,c,d,e,f);return g.bake()},Cookie.remove=function(a){var b=this.fetch(a);return b?b.remove():void 0};var JSON=window.JSON;"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),DataAPI.on("initialize",function(){this.generateEndpointMethods([{id:"list_endpoints",route:"/endpoints",verb:"GET",resources:null},{id:"authenticate",route:"/authentication",verb:"POST",resources:null},{id:"get_token",route:"/token",verb:"POST",resources:null},{id:"revoke_authentication",route:"/authentication",verb:"DELETE",resources:null},{id:"revoke_token",route:"/token",verb:"DELETE",resources:null},{id:"get_user",route:"/users/:user_id",verb:"GET",resources:null},{id:"update_user",route:"/users/:user_id",verb:"PUT",resources:["user"]},{id:"list_blogs_for_user",route:"/users/:user_id/sites",verb:"GET",resources:null},{id:"get_blog",route:"/sites/:blog_id",verb:"GET",resources:null},{id:"list_entries",route:"/sites/:site_id/entries",verb:"GET",resources:null},{id:"create_entry",route:"/sites/:site_id/entries",verb:"POST",resources:["entry"]},{id:"get_entry",route:"/sites/:site_id/entries/:entry_id",verb:"GET",resources:null},{id:"update_entry",route:"/sites/:site_id/entries/:entry_id",verb:"PUT",resources:["entry"]},{id:"delete_entry",route:"/sites/:site_id/entries/:entry_id",verb:"DELETE",resources:null},{id:"list_categories",route:"/sites/:site_id/categories",verb:"GET",resources:null},{id:"list_comments",route:"/sites/:site_id/comments",verb:"GET",resources:null},{id:"list_comments_for_entry",route:"/sites/:site_id/entries/:entry_id/comments",verb:"GET",resources:null},{id:"create_comment",route:"/sites/:site_id/entries/:entry_id/comments",verb:"POST",resources:["comment"]},{id:"create_reply_comment",route:"/sites/:site_id/entries/:entry_id/comments/:comment_id/replies",verb:"POST",resources:["comment"]},{id:"get_comment",route:"/sites/:site_id/comments/:comment_id",verb:"GET",resources:null},{id:"update_comment",route:"/sites/:site_id/comments/:comment_id",verb:"PUT",resources:["comment"]},{id:"delete_comment",route:"/sites/:site_id/comments/:comment_id",verb:"DELETE",resources:null},{id:"list_trackbacks",route:"/sites/:site_id/trackbacks",verb:"GET",resources:null},{id:"list_trackbacks_for_entry",route:"/sites/:site_id/entries/:entry_id/trackbacks",verb:"GET",resources:null},{id:"get_trackback",route:"/sites/:site_id/trackbacks/:ping_id",verb:"GET",resources:null},{id:"update_trackback",route:"/sites/:site_id/trackbacks/:ping_id",verb:"PUT",resources:["trackback"]},{id:"delete_trackback",route:"/sites/:site_id/trackbacks/:ping_id",verb:"DELETE",resources:null},{id:"upload_asset",route:"/sites/:site_id/assets/upload",verb:"POST",resources:null},{id:"list_permissions",route:"/users/:user_id/permissions",verb:"GET",resources:null},{id:"publish_entries",route:"/publish/entries",verb:"GET",resources:null},{id:"get_stats_provider",route:"/sites/:site_id/stats/provider",verb:"GET",resources:null},{id:"list_stats_pageviews_for_path",route:"/sites/:site_id/stats/path/pageviews",verb:"GET",resources:null},{id:"list_stats_visits_for_path",route:"/sites/:site_id/stats/path/visits",verb:"GET",resources:null},{id:"list_stats_pageviews_for_date",route:"/sites/:site_id/stats/date/pageviews",verb:"GET",resources:null},{id:"list_stats_visits_for_date",route:"/sites/:site_id/stats/date/visits",verb:"GET",resources:null}])}),window.MT=window.MT||{},window.MT.DataAPI=window.MT.DataAPI||DataAPI,window.MT.DataAPI["v"+DataAPI.version]=DataAPI,"object"==typeof module&&module&&"object"==typeof module.exports&&(module.exports=DataAPI)}("undefined"==typeof window?null:window);
/*
//@ sourceMappingURL=mt-data-api.min.map
*/