(function(d){var b=false;var c=function(){};var e=null;var a=null;tinymce.ScriptLoader.add(tinymce.PluginManager.urls.mt_fullscreen+"/langs/plugin.js");tinymce.create("tinymce.plugins.MTFullScreenPlugin",{init:function(l,g){var k=this;k.buttonIDs={};tinymce.DOM.loadCSS(g+"/css/mt_fullscreen.css");var h,o,j,f,m,i;function n(p){d.each(i,function(q,r){if(tinyMCE.editors[r]){p.apply(tinyMCE.editors[r],[])}})}l.addCommand("mtFullScreenUpdateFitToWindow",function(){if(!b){return}var p=new Date();if(a&&p-a<150){return}a=p;var q=f.outerHeight();c=function(){var r=j.find(".mt-editor-manager-wrap:visible");var u=j.find("iframe:visible, textarea:visible").parent();var s=r.outerHeight()-u.outerHeight()+q,t=j.find(".mce-resizehandle:visible, .mce-path:visible").filter(function(){return d(this).css("visibility")!=="hidden"});if(t.length===0){s-=j.find(".mce-statusbar:visible").outerHeight()}n(function(){this.theme.resizeTo(null,h.height()-s)})}});l.addCommand("mtFullScreenFitToWindow",function(){if(c){c()}});l.addCommand("mtFullScreenIsEnabled",function(p){p.enabled=b});l.addCommand("mtFullScreen",function(){if(!b){e=l.execCommand("mtGetEditorSize");j.addClass("fullscreen_editor").css({width:"100%",margin:"0",padding:"0"});d("body").addClass("fullscreen_editor_screen");n(function(){d(l.getContainer()).find(".mce-resizehandle").hide()});b=true;l.execCommand("mtFullScreenUpdateFitToWindow");c();h.bind("resize.mt_fullscreen",c)}else{l.execCommand("mtRestoreEditorSize",e);j.removeClass("fullscreen_editor").css({width:"",margin:"",padding:""});d("body").removeClass("fullscreen_editor_screen");n(function(){d(l.getContainer()).find(".mce-resizehandle").show()});b=false;c=function(){};h.unbind("resize.mt_fullscreen")}n(function(){this.nodeChanged()})});l.addMTButton("mt_fullscreen",{title:"fullscreen",cmd:"mtFullScreen",onPostRender:function(){var p=this;l.on("NodeChange",function(q){p.active(b)})}});l.on("Init",function(){h=d(window);o=d(l.getContainer());j=o.closest("#text-field");f=j.find(".editor-header");m=f.find(".tab");if(f.length==0||m.length==0){j=o.closest(".field-content")}c=function(){};i=j.find("textarea").map(function(){return this.id})})},getInfo:function(){return{longname:"MTFullscreen",author:"Six Apart, Ltd",authorurl:"",infourl:"",version:"1.0"}}});tinymce.PluginManager.add("mt_fullscreen",tinymce.plugins.MTFullScreenPlugin,["mt"])})(jQuery);